<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Kepler by Alec Moore</title>
    <link rel="icon" type="image/png" href="favicon.png">
    <link rel="stylesheet" href="stylesheets/vidContain.css">
    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="javascripts/respond.js"></script>
    <script type="text/javascript"
      src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
    </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <!--[if lt IE 8]>
    <link rel="stylesheet" href="stylesheets/ie.css">
    <![endif]-->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

  </head>
  <body>

      <div id="header">
        <nav>
          <li class="fork"><a href="https://github.com/tapiralec/kepler">Fork On GitHub</a></li>
          <li class="downloads"><a href="https://github.com/tapiralec/kepler/zipball/master">ZIP</a></li>
          <li class="downloads"><a href="https://github.com/tapiralec/kepler/tarball/master">TAR</a></li>
          <li class="title">DOWNLOADS</li>
        </nav>
      </div><!-- end header -->

    <div class="wrapper">

      <section>
        <div id="title">
          <h1>Kepler</h1>
          <p>Modeling Kepler's Orbital Laws in One Dimension with a Physical System Using Arduino Analogs</p>
          <hr>
          <span class="credits left">Project maintained by <a href="https://github.com/tapiralec">tapiralec</a></span>
          <span class="credits right">This project is released under the terms of the MIT license.</span>
        </div>
        <h1>Final Results First</h1>
        <div class="video-container">
          <iframe width="100%" src="https://www.youtube.com/embed/zVbFndAy_EY" frameborder="0" allowfullscreen></iframe>
        </div>

        <h1>About the System</h1>
        <p>Each planet first generates some random values for its semimajor axis and eccentricity. It uses these values to compute its distance from the sun at aphelion and perihelion, and its velocity at those positions.
<pre><code>eccentricity = (float) 2/PI * atan((double)random(100)/100);
semimajorAxis = random(50,100);
Ra = semimajorAxis*(1+eccentricity);
Rp = semimajorAxis*(1-eccentricity);
velocity_MAX = sqrt(2.0f / Rp) - (1.0f/semimajorAxis);
velocity_MIN = sqrt(2.0f / Ra) - (1.0f/semimajorAxis);
</code></pre>
        velocity in a stable elliptical orbit can be given by the Vis-viva equation:
        \[v = \sqrt{\mu(\frac{2}{r}-\frac{1}{a})}\\
        \mu = \text{gravitational parameter}\\
        r = \text{distance between orbiting bodies}\\
        a = \text{length of semimajor axis}\]

        in order to keep things on the same scale (otherwise some planets might appear not to move at all!) we assume that the \(m_{\text{sun}} \gg m_{\text{planet}} \Rightarrow \mu\) is constant and so we can remove it.
        The planet arduinos then spend an amount of time proportional to the inverse of their speed in each of 250 discrete steps around its orbit. Their speed is mapped to the values 1-10 -- 1 being their minimum velocity, and 10 being their maximum velocity -- and is displayed on their LED displays
<pre><code>velocity = sqrt(2.0f / rVals[Rindex]) - (1.0f/semimajorAxis);
float speedBar = map((int)1000*velocity,(int)1000*velocity_MIN,(int)1000*velocity_MAX,1,10);
for (int i = 0; i < 10; i ++){
  if (i&ltspeedBar){
    digitalWrite(i, HIGH);
  } else {
    digitalWrite(i, LOW);
  }
}
</code></pre>
        The parent arduino uses the Wire library to request data from each planet arduino, which in turn responds with its current distance from the sun. The parent arduino uses that to set the position of each servo.
        </p>


        <h1>Getting the Hardware</h1>
        <p>shopping list:</p>
        <ul>
          <li>5 arduinos (we used one official and 2 sparkfun unos and 2 official duemilanoves)</li>
          <li>4 <a href="http://www.adafruit.com/products/1816">10 LED bargraph display</a></li>
          <li>40 resistors (in the spec sheet for the referenced ones, \(R=\frac{V}{25mA}\) so for \(5V\) you want to use \(R\geq 200\Omega\))</li>
          <li>1 <a href="http://www.adafruit.com/products/1411">16 channel servo shield</a></li>
          <li>1 <a href="http://www.adafruit.com/products/276">\(5V 2A\) power supply</a></li>
          <li>1 <a href="http://www.adafruit.com/products/368">female DC power adapter</a></li>
          <li>4 <a href="http://www.adafruit.com/products/1143">high torque servos</a></li>
          <li>1 <a href="http://www.adafruit.com/products/1138">Adafruit Neopixel strip</a></li>
          <li>some wooden dowel rods in 2 sizes (thicker for supporting the frame, thinner for wrapping the string)</li>
          <li>some foamboard (we used 2 boards of 16"x20", and some extra for the sides)</li>
          <li>1 <a href="http://www.homedepot.com/p/OPTIX-18-in-x-24-in-x-220-in-Acrylic-Sheet-MC-21/202038050?keyword=202038050">acrylic sheet</a> (we only used 16"x20" of this 18"x24" sheet)</li>
          <li>hot glue/gun</li>
          <li>string</li>
          <li>fairly flexible stranded wire</li>
          <li>stiffer solid core wire</li>
          <li>soldering iron</li>
          <li>solder</li>
        </ul>
        <p>helpful, but not necessary</p>
        <ul>
          <li>heat-shrink wrap</li>
          <li>3D printer</li>
        </ul>


        <h1>Building the Hardware</h1>
        <p>Building the system:</p>
        <ul>
          <li>Assemble the servo shield according to <a href="https://learn.adafruit.com/adafruit-16-channel-pwm-slash-servo-shield">this guide</a></li>
          <li>3D print 4 wheels for the strings. I used <a href="https://www.thingiverse.com/thing:608911">these</a> but you can make some by hand out of whatever.</li>
          <img width="49%" src="pictures/11.jpg" alt="sweet wheels">
          <li>Attach the wheels to the servos (if, like us, there's no good screw point, just hot glue them on)</li>
          <img width="49%" src="pictures/12.jpg" alt="sticky situation">
          <li>Attach resistors to the LED displays - I used \(270\Omega\)</li>
          <img width="49%" src="pictures/1.jpg" alt="helping hands are great!">
          <img width="49%" src="pictures/2.jpg" alt="shrinkwrap is awesome too!">
          <li>Attach a lead from each positive terminal of the LED to D0-10 on the arduino. Use the stiff wire to hold the LEDs in place. Combine the far end of the resistors to a common ground line, and connect that to the GND pin on the arduino.</li>
          <img width="49%" src="pictures/4.jpg">
          <li>Line up servo with wheels to board - if attaching with hot glue, cut a hole through the foamboard so that the force is mostly into the board, instead of causing a torque. Also at this time, line up some thin wooden dowel to wrap the string around.</li>
          <img width="49%" src="pictures/14.jpg">
          <li>Attach arduinos to string - we just used hot glue. it seems sufficient, as the friction of the raw bottom of the arduino against the paper of the foamboard isn't too much.</li>
          <img width="49%" src="pictures/13.jpg" alt="prelimenary testing">
          <li>Attach a lead from each positive terminal of the LED to D0-10 on the arduino. Combine the far end of the resistors to a common ground line, and connect that to the GND pin on the arduino.</li>
          <img width="49%" src="pictures/4.jpg">
          <li>Line up servo with wheels to board - if attaching with hot glue, cut a hole through the foamboard so that the force is mostly into the board, instead of causing a torque. Also at this time, line up some thin wooden dowel to wrap the string around.</li>
          <img width="49%" src="pictures/14.jpg">
          <li>From the master arduino, attach a wire to +5V, GND, SCL, SDA. You will need to do inline solder joints to accommodate the number of arduinos you have up top</li>
          <img width="49%" src="pictures/15.jpg">
          <li>It's a good idea to braid these cables so they are manageable</li>
          <img width="49%" src="pictures/9.jpg">
          <li>Laser cut the acrylic into a shape that allows for the LEDs to poke above the surface - feel free to modify this .svg to the requirements of laser cutter. The reference cyan outline is at 16"x20".</li>
          <img width="49%" src="pictures/laserCut.svg">
          <li>Cut the neopixel strip to the length of the acrylic (25 LEDs for me)</li>
          <li>Solder the input side to some wire, and the wire to +5v, GND, and PIN8 on the master arduino</li>
          <li>Use the thicker wooden dowel to hold the foamboard layer with the wheels and arduinos above a base sheet of foamboard. make sure these dowel rods extend above the wheel layer with enough clearance to put the acrylic sheet on top.</li>
          <li>Do final verification that the code is uploaded to the boards and works correctly. After attaching the walls, it will be difficult to adjust without having to tear something apart.</li>
          <li>Hot glue walls to the sides of the assembly - it helps to have 2 people do this. make sure the neopixels are attached to the inside of a wall, at the correct height to line up with the acrylic sheet</li>
          <li>That's it! Congratulations!</li>
        </ul>

    <!--[if !IE]><script>fixScale(document);</script><!--<![endif]-->
  </body>
</html>
